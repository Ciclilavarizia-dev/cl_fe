<div #navbar class="full-navbar" [style.transform]="'translateY(' + offset + 'px)'">
  <nav class="main-navbar">
    <!-- LOGO -->
    <div class="left-navbar">
      <a routerLink="/home">
        <picture>
          <source media="(max-width: 576px)" srcset="assets/images/logo/logo-nobg-only-icon.png">
          <img src="assets/images/logo/logo-nobg-tagliato.png" alt="logo" />
        </picture>
      </a>
    </div>

    <!-- Search bar: NASCOSTA su mobile, VISIBILE su desktop -->
    <app-search-bar (openAdvancedSearchModal)="openAdvancedSearchModal.emit()" />

    <!-- Contenitore del icona del profilo e carello -->
    <div class="right-navbar">

      <app-cart-badge />

      <div class="user-profile" (mouseenter)="showMenuNow(true)" (mouseleave)="hideMenuWithDelay()">
        @if (!isLogged) {
        <p class="btn" routerLink="/login">LOGIN</p>
        <i routerLink="/login" class="bi bi-person-circle person-lg"></i>
        } @if (isLogged) { @if (userEmail) {
        <div class="user-icon">
          {{ userEmail[0] | uppercase }}
        </div>
        } }

        <!-- Dropdown -->
        <div class="user-dropdown" *ngIf="showUserMenu">
          <a routerLink="/profile"><i class="bi bi-person-fill"></i> Profilo</a>
          <a (click)="logout()"> <i class="bi bi-box-arrow-right"></i>Logout</a>
        </div>
      </div>

      <!-- Pulsante hamburger -->
      <button class="hamburger-btn" (click)="toggleMenu()">â˜°</button>
    </div>

    <!-- Menu Hamburger: search bar VISIBILE solo qui su mobile -->
    <!-- <div class="hamburger-window" [class.open]="showHamburgerMenu">
      <div class="search-bar-mobile-wrapper">
        <app-search-bar />
      </div>

      <ul>
        <li *ngFor="let link of childLinks">
          <a [routerLink]="link.path">{{ link.label }}</a>
        </li>
      </ul>
    </div> -->
  </nav>

  <div class="desktop-only">
    <app-main-categories-bar [onClose]="closeMenu" />
  </div>

  <div class="mobile-only">
    @if (showHamburgerMenu) {
    <app-main-categories-bar [onClose]="closeMenu" />
    }
  </div>

</div>