<div class="admin-products">

  <h2>Products</h2>

  <table *ngIf="!isLoading" class="table table-striped table-hover">
    <thead>
      <tr>
        <th class="sort-by" (click)="changeSort('id')">ID</th>
        <th>Product Number</th>
        <th class="sort-by" (click)="changeSort('name')">Name</th>
        <th class="sort-by" (click)="changeSort('price')">List Price</th>
        <th class="sort-by" (click)="changeSort('category')">Category</th>
        <th class="sort-by" (click)="changeSort('parentcategory')">Parent Category</th>
        <th>Modified date</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of products">
        <td>{{ p.productId }}</td>
        <td>{{ p.productNumber }}</td>
        <td>{{ p.name }}</td>
        <td>{{ p.listPrice | currency }}</td>
        <td>{{ p.categoryName }}</td>
        <td>{{ p.parentCategoryName }}</td>
        <td>{{ p.modifiedDate | date:'yyyy-MM-dd HH:mm' }}</td>

        <td class="text-end position-relative">
          <button type="button" (click)="toggleActions(p.productId, $event)" aria-label="Open actions" title="actions"
            class="kebab-btn">
            <i class="bi bi-three-dots-vertical"></i>
          </button>

          <div class="row-popover" *ngIf="activeProductId === p.productId">
            <button type="button" class="action-item" (click)="goToEdit(p.productId, $event)">Show/Edit details</button>
            <button type="button" class="action-item danger">Remove</button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <p class="big-ass-page" *ngIf="isLoading">Loading products...</p>

  <div class="prev-next d-flex justify-content-center align-items-center mt-3">
    <button class="btn btn-secondary" (click)="prevPage()" [disabled]="page === 1">
      Previous
    </button>

    <!-- <span>
      Page {{ page }} Â· {{ totalCount }} products
    </span> -->
    <span>
      Page {{ page }} / {{ totalPages }}
    </span>

    <!-- <button class="btn btn-secondary" (click)="nextPage()" [disabled]="page * pageSize >= totalCount">
      Next
    </button> -->
    <button class="btn btn-secondary" (click)="nextPage()" [disabled]="page >= totalPages">
      Next
    </button>
  </div>
</div>